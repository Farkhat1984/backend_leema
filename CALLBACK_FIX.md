# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ê –û–®–ò–ë–ö–ê "API_URL is not defined"

**–î–∞—Ç–∞:** 2025-10-17 18:38
**–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ ‚úÖ

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Google –ø–æ—è–≤–ª—è–ª–∞—Å—å –æ—à–∏–±–∫–∞:
```
–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
API_URL is not defined
```

---

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ–∞–π–ª–µ `/public/auth/callback.html`:

**–ë—ã–ª–æ:**
```html
<script defer src="../../assets/js/core/config.js"></script>
<script>
    async function handleCallback() {
        // –°—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API_URL
        const response = await fetch(`${API_URL}/api/v1/auth/google/login`, {
```

–°–∫—Ä–∏–ø—Ç —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `defer` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `API_URL` —Å—Ä–∞–∑—É, –¥–æ —Ç–æ–≥–æ –∫–∞–∫ `config.js` –∑–∞–≥—Ä—É–∑–∏–ª—Å—è.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–£–±—Ä–∞–Ω –∞—Ç—Ä–∏–±—É—Ç `defer` –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

**–°—Ç–∞–ª–æ:**
```html
<script src="../../assets/js/core/config.js"></script>
<script>
    async function handleCallback() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ API_URL –∑–∞–≥—Ä—É–∂–µ–Ω
        if (typeof API_URL === 'undefined') {
            showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
            return;
        }
        
        // –¢–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API_URL
        const response = await fetch(`${API_URL}/api/v1/auth/google/login`, {
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –£–±—Ä–∞–Ω `defer` - config.js –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º
2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `typeof API_URL === 'undefined'` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –µ—Å–ª–∏ config –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è

---

## üîÑ –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω /var/www/frontend_leema/public/auth/callback.html
‚úÖ Frontend –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω —Å --no-cache
‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ callback.html –æ–±–Ω–æ–≤–ª—ë–Ω
curl http://localhost:8080/public/auth/callback.html | grep "typeof API_URL"

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps | grep frontend-leema
# frontend-leema: Up (healthy)
```

---

## üöÄ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://www.leema.kz/public/index.html
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
4. –ü—Ä–æ–π–¥–∏—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é Google
5. –î–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

## üìã –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è OAuth

1. ‚úÖ –°—Ç–∞—Ä—ã–π Google Client ID ‚Üí –ù–æ–≤—ã–π (236011762515...)
2. ‚úÖ API URL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (—É–±—Ä–∞–Ω www)
3. ‚úÖ Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
4. ‚úÖ Frontend –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω
5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "API_URL is not defined"

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üéâ**
